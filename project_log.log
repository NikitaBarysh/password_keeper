{"level":"info","ts":1714511762.47014,"caller":"logger/init.go:43","msg":"Version: , Time: "}
{"level":"info","ts":1714511789.4417439,"caller":"logger/init.go:29","msg":"Project cfg: endpoint: 8080, database: postgres://postgres:qwerty@localhost:5436/postgres?sslmode=disable"}
{"level":"error","ts":1714511789.482489,"caller":"logger/init.go:33","msg":"err test","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:33\nmain.main\n\t/Users/nikitabar/Developer/password_keeper/cmd/server/main.go:38\nruntime.main\n\t/Users/nikitabar/sdk/go1.22.2/src/runtime/proc.go:271"}
{"level":"info","ts":1714511789.482599,"caller":"logger/init.go:29","msg":"Server start"}
{"level":"info","ts":1714511838.270775,"caller":"logger/init.go:29","msg":"Version: , Time: "}
{"level":"info","ts":1714511841.22834,"caller":"logger/init.go:29","msg":"Project cfg: endpoint: 8080, database: postgres://postgres:qwerty@localhost:5436/postgres?sslmode=disable"}
{"level":"info","ts":1714511841.264662,"caller":"logger/init.go:29","msg":"Server start"}
{"level":"error","ts":1714511849.2380102,"caller":"logger/init.go:33","msg":"err to scan id: %!(EXTRA *errors.errorString=sql: no rows in result set)","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:33\npassword_keeper/internal/server/repository.(*AuthRepository).GetUserFromDB\n\t/Users/nikitabar/Developer/password_keeper/internal/server/repository/user.go:86\npassword_keeper/internal/server/service.(*AuthService).CheckData\n\t/Users/nikitabar/Developer/password_keeper/internal/server/service/auth.go:67\npassword_keeper/internal/server/handler.(*Handler).singIn\n\t/Users/nikitabar/Developer/password_keeper/internal/server/handler/auth.go:73\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\npassword_keeper/internal/common/encryption.DecryptMiddleware.func1\n\t/Users/nikitabar/Developer/password_keeper/internal/common/encryption/middleware.go:25\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:73\ngithub.com/go-chi/chi/v5.(*Mux).Mount.func1\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:327\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:90\nnet/http.serverHandler.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2039"}
{"level":"error","ts":1714511849.238913,"caller":"logger/init.go:33","msg":"err to get user from DB: %!(EXTRA *fmt.wrapError=err to scan id: sql: no rows in result set)","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:33\npassword_keeper/internal/server/service.(*AuthService).CheckData\n\t/Users/nikitabar/Developer/password_keeper/internal/server/service/auth.go:69\npassword_keeper/internal/server/handler.(*Handler).singIn\n\t/Users/nikitabar/Developer/password_keeper/internal/server/handler/auth.go:73\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\npassword_keeper/internal/common/encryption.DecryptMiddleware.func1\n\t/Users/nikitabar/Developer/password_keeper/internal/common/encryption/middleware.go:25\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:73\ngithub.com/go-chi/chi/v5.(*Mux).Mount.func1\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:327\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:90\nnet/http.serverHandler.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2039"}
{"level":"error","ts":1714511849.238975,"caller":"logger/init.go:33","msg":"invalid login or password: %!(EXTRA *fmt.wrapError=err to get user fro DB: err to scan id: sql: no rows in result set)","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:33\npassword_keeper/internal/server/handler.(*Handler).singIn\n\t/Users/nikitabar/Developer/password_keeper/internal/server/handler/auth.go:75\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\npassword_keeper/internal/common/encryption.DecryptMiddleware.func1\n\t/Users/nikitabar/Developer/password_keeper/internal/common/encryption/middleware.go:25\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:73\ngithub.com/go-chi/chi/v5.(*Mux).Mount.func1\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:327\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:90\nnet/http.serverHandler.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/Users/nikitabar/sdk/go1.22.2/src/net/http/server.go:2039"}
{"level":"error","ts":1714511849.239191,"caller":"logger/init.go:33","msg":"StatusCode not 200","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:33\npassword_keeper/internal/client/sender.(*Sender).PostUserRequest\n\t/Users/nikitabar/Developer/password_keeper/internal/client/sender/sender.go:92\nmain.main\n\t/Users/nikitabar/Developer/password_keeper/cmd/client/main.go:56\nruntime.main\n\t/Users/nikitabar/sdk/go1.22.2/src/runtime/proc.go:271"}
{"level":"error","ts":1714511849.239267,"caller":"logger/init.go:33","msg":"Failed to register user ","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:33\nmain.main\n\t/Users/nikitabar/Developer/password_keeper/cmd/client/main.go:58\nruntime.main\n\t/Users/nikitabar/sdk/go1.22.2/src/runtime/proc.go:271"}
{"level":"info","ts":1714555759.264734,"caller":"logger/init.go:37","msg":"Project cfg: endpoint: 8080, database: postgres://postgres:qwerty@localhost:5436/postgres?sslmode=disable"}
{"level":"info","ts":1714555759.323015,"caller":"logger/init.go:37","msg":"Server start"}
{"level":"info","ts":1714555786.013875,"caller":"logger/init.go:37","msg":"%!(EXTRA zapcore.Field={uri 15 0 /login <nil>}, zapcore.Field={method 15 0 POST <nil>}, zapcore.Field={status 11 200  <nil>}, zapcore.Field={duration 8 36736459  <nil>}, zapcore.Field={size 11 121  <nil>}, zapcore.Field={header 15 0  <nil>})"}
{"level":"error","ts":1714555788.46451,"caller":"logger/init.go:41","msg":"err to upgrade to websocket ","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:41\npassword_keeper/internal/server/handler.(*Handler).handleSetWebsocket\n\t/Users/nikitabar/Developer/password_keeper/internal/server/handler/websocket.go:28\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:2166\npassword_keeper/internal/server/handler.(*Handler).AuthorizationMiddleware-fm.(*Handler).AuthorizationMiddleware.func1\n\t/Users/nikitabar/Developer/password_keeper/internal/server/handler/middleware.go:37\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:73\ngithub.com/go-chi/chi/v5.(*Mux).Mount.func1\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:327\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:459\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:2166\npassword_keeper/internal/common/logger.LoggingMiddleware.func1\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/middleware.go:71\nnet/http.HandlerFunc.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:2166\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/Users/nikitabar/go/src/pkg/mod/github.com/go-chi/chi/v5@v5.0.12/mux.go:90\nnet/http.serverHandler.ServeHTTP\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/Users/nikitabar/sdk/go1.22.0/src/net/http/server.go:2039"}
{"level":"info","ts":1714555788.4650419,"caller":"logger/init.go:37","msg":"%!(EXTRA zapcore.Field={uri 15 0 /api/ws <nil>}, zapcore.Field={method 15 0 GET <nil>}, zapcore.Field={status 11 500  <nil>}, zapcore.Field={duration 8 503917  <nil>}, zapcore.Field={size 11 49  <nil>}, zapcore.Field={header 15 0  <nil>})"}
{"level":"error","ts":1714555788.465295,"caller":"logger/init.go:41","msg":"websocket: bad handshake","stacktrace":"password_keeper/internal/common/logger.(*Logger).Error\n\t/Users/nikitabar/Developer/password_keeper/internal/common/logger/init.go:41\npassword_keeper/internal/client/sender.(*Sender).ConnectWs\n\t/Users/nikitabar/Developer/password_keeper/internal/client/sender/sender.go:222\nmain.main\n\t/Users/nikitabar/Developer/password_keeper/cmd/client/main.go:89\nruntime.main\n\t/Users/nikitabar/sdk/go1.22.0/src/runtime/proc.go:271"}
2